<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5">
    <meta name="description" content="Information Retrieval (IR) is the activity of finding resources that have relevant information, usually documents, from a large collection, in response to a query. I’ve always been fascinated by large">
<meta property="og:type" content="article">
<meta property="og:title" content="Building a full text search engine">
<meta property="og:url" content="https://briefbytes.com/2021/Building-a-full-text-search-engine/index.html">
<meta property="og:site_name" content="BRIEF BYTES">
<meta property="og:description" content="Information Retrieval (IR) is the activity of finding resources that have relevant information, usually documents, from a large collection, in response to a query. I’ve always been fascinated by large">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-07-14T21:15:00.000Z">
<meta property="article:modified_time" content="2022-05-06T19:13:28.656Z">
<meta property="article:author" content="Rui Almeida">
<meta property="article:tag" content="go">
<meta property="article:tag" content="information retrieval">
<meta property="article:tag" content="nlp">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/desktop.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/android.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple.png">
        
      
    
    
    <title>Building a full text search engine</title>
    
    
<link rel="stylesheet" href="/css/style.css">

    
    
    
    
    
      <link rel="alternate" href="/atom.xml" title="BRIEF BYTES" type="application/atom+xml">
    
	
	
<meta name="generator" content="Hexo 6.1.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick='$("html, body").animate({scrollTop:0},"fast")' style="display:none"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <li><a href="/">Home</a></li><li><a href="/about/">About</a></li><li><a href="/archives/">Writing</a></li><li><a target="_blank" rel="noopener" href="https://github.com/ruial">Projects</a></li><li><a href="/search/">Search</a></li><li><a href="/atom.xml">RSS</a></li>
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2022/The-architecture-of-a-small-side-project/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2021/Azure-Kubernetes-Service-Pipelines/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fas fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none">Previous post</span>
      <span id="i-next" class="info" style="display:none">Next post</span>
      <span id="i-top" class="info" style="display:none">Back to top</span>
      <span id="i-share" class="info" style="display:none">Share post</span>
    </span>
    <br>
    <div id="share" style="display:none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://briefbytes.com/2021/Building-a-full-text-search-engine/"><i class="fab fa-facebook" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://briefbytes.com/2021/Building-a-full-text-search-engine/&text=Building a full text search engine"><i class="fab fa-twitter" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://briefbytes.com/2021/Building-a-full-text-search-engine/&title=Building a full text search engine"><i class="fab fa-linkedin" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://briefbytes.com/2021/Building-a-full-text-search-engine/&is_video=false&description=Building a full text search engine"><i class="fab fa-pinterest" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Building a full text search engine&body=Check out this article: https://briefbytes.com/2021/Building-a-full-text-search-engine/"><i class="fas fa-envelope" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://briefbytes.com/2021/Building-a-full-text-search-engine/&title=Building a full text search engine"><i class="fab fa-get-pocket" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://briefbytes.com/2021/Building-a-full-text-search-engine/&title=Building a full text search engine"><i class="fab fa-reddit" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://briefbytes.com/2021/Building-a-full-text-search-engine/&title=Building a full text search engine"><i class="fab fa-stumbleupon" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://briefbytes.com/2021/Building-a-full-text-search-engine/&title=Building a full text search engine"><i class="fab fa-digg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://briefbytes.com/2021/Building-a-full-text-search-engine/&name=Building a full text search engine&description="><i class="fab fa-tumblr" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://briefbytes.com/2021/Building-a-full-text-search-engine/&t=Building a full text search engine"><i class="fab fa-hacker-news" aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Indexing"><span class="toc-number">1.</span> <span class="toc-text">Indexing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Querying"><span class="toc-number">2.</span> <span class="toc-text">Querying</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#A-minimal-search-engine-in-Go"><span class="toc-number">3.</span> <span class="toc-text">A minimal search engine in Go</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Building a full text search engine
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Rui Almeida</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2021-07-14T21:15:00.000Z" itemprop="datePublished">2021-07-14</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/go/" rel="tag">go</a>, <a class="tag-link-link" href="/tags/information-retrieval/" rel="tag">information retrieval</a>, <a class="tag-link-link" href="/tags/nlp/" rel="tag">nlp</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>Information Retrieval (IR) is the activity of finding resources that have relevant information, usually documents, from a large collection, in response to a query. I’ve always been fascinated by large-scale search engines like Google. In this post I will talk a bit about the IR process and how to build a full text search engine in Go. The code is available in <a target="_blank" rel="noopener" href="https://github.com/ruial/busca">GitHub</a>.</p>
<h2 id="Indexing"><a href="#Indexing" class="headerlink" title="Indexing"></a>Indexing</h2><p>Indexing is an operation to facilitate searches, by avoiding the need to do full scans over the entire dataset. With indexes, faster retrievals are traded for additional storage and higher update times because the index has to be maintained. A simple index example in JSON format is presented bellow:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;inverted-index&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;example&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;doc1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;doc2&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;doc1&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;documents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;doc1&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example content&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;doc2&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>As the index stores a list of words and the documents in which they appear, matches are quickly retrieved. Tokenization is the process of separating text into smaller units (words, n-grams, sentences). Other text preprocessing techniques like lower casing, removing stop words, stemming (trimming suffixes), among others, can be useful to improve search results. On <a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html">Elasticsearch</a>, these text analysis steps are performed by an Analyzer.</p>
<h2 id="Querying"><a href="#Querying" class="headerlink" title="Querying"></a>Querying</h2><p>An IR process starts when a user enters a query into the system, which is then evaluated, and a set of relevant results are displayed. Query expansion techniques like replacing synonyms and fixing spelling errors are often used to improve relevance. Variations of the <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf">tf–idf</a> weighting scheme are able to rank how well each document matches a given query. Other examples of ranking algorithms are Okapi BM25, PageRank and <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Learning_to_rank">machine learning models</a>.</p>
<p>There are many <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Evaluation_measures_(information_retrieval)">metrics</a> to evaluate search engines. Precision, recall and F1-score are popular when dealing with unordered sets. On huge web search engines, it is not possible to calculate absolute recall as the number of relevant results for a given query is usually unknown, so the mean precision of the top results on a set of queries can be considered. To take order into account there are metrics like the discounted cumulative gain. When an IR system is already deployed, new versions can be evaluated with online metrics and AB testing.</p>
<h2 id="A-minimal-search-engine-in-Go"><a href="#A-minimal-search-engine-in-Go" class="headerlink" title="A minimal search engine in Go"></a>A minimal search engine in Go</h2><p>Go is a great language to build web services. Its concurrency mechanisms are easy to use, it is statically typed, compiles quickly, dependency management is not a disaster (looking at you, Python) and tooling is also great (race detector, profiler, benchmark tests and no need for test libraries).</p>
<p>The data structures chosen for the index consist of two maps. One with the terms as keys and document IDs as values, and another with the document IDs as keys and the documents and term frequencies as values. Storing the term frequencies at index time allows faster ranking of search results, as they do not have to be calculated later.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> DocumentData <span class="keyword">struct</span> &#123;</span><br><span class="line">  Doc         Document</span><br><span class="line">  TermsCount  <span class="type">float64</span></span><br><span class="line">  Frequencies <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Index <span class="keyword">struct</span> &#123;</span><br><span class="line">  terms      <span class="keyword">map</span>[<span class="type">string</span>][]core.DocumentID</span><br><span class="line">  documents  <span class="keyword">map</span>[core.DocumentID]core.DocumentData</span><br><span class="line">  analyzer   analysis.Analyzer</span><br><span class="line">  docsMutex  sync.RWMutex</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The RWMutex is important to prevent race conditions. The lock can be held by an arbitrary number of readers or a single writer. To maximize concurrency, the operations done while the lock is held should be fast. I’ve created a snippet with the most important parts:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i *Index)</span></span> AddDocument(document core.Document) <span class="type">error</span> &#123;</span><br><span class="line">  <span class="comment">// text analysis outside the lock</span></span><br><span class="line">  terms := i.analyzer.Analyze(document.Text())</span><br><span class="line">  frequencies := core.NewTermFrequency(terms)</span><br><span class="line"></span><br><span class="line">  i.docsMutex.Lock()</span><br><span class="line">  <span class="keyword">defer</span> i.docsMutex.Unlock()</span><br><span class="line">  id := document.ID()</span><br><span class="line">  <span class="keyword">if</span> _, ok := i.documents[id]; ok &#123;</span><br><span class="line">    <span class="keyword">return</span> errors.New(<span class="string">&quot;Document already exists&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// update the maps if the document does not already exist</span></span><br><span class="line">  <span class="keyword">var</span> termsCount <span class="type">float64</span></span><br><span class="line">  <span class="keyword">for</span> t, f := <span class="keyword">range</span> frequencies &#123;</span><br><span class="line">    i.terms[t] = <span class="built_in">append</span>(i.terms[t], id)</span><br><span class="line">    termsCount += f</span><br><span class="line">  &#125;</span><br><span class="line">  i.documents[id] = core.DocumentData&#123;Doc: document, Frequencies: frequencies, TermsCount: termsCount&#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i *Index)</span></span> SearchDocuments(query <span class="type">string</span>, filterFn search.Filter, rankFn search.Ranker) []core.DocumentScore &#123;</span><br><span class="line">  <span class="comment">// use the same analyzer to get search terms, filter the documents and rank them</span></span><br><span class="line">  terms := i.analyzer.Analyze(query)</span><br><span class="line">  docs := i.filterDocuments(terms, filterFn)</span><br><span class="line">  <span class="keyword">return</span> rankFn(terms, docs)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i *Index)</span></span> filterDocuments(terms []<span class="type">string</span>, filterFn search.Filter) <span class="keyword">map</span>[core.DocumentID]core.DocumentData &#123;</span><br><span class="line">  <span class="comment">// readers must also lock to prevent race conditions</span></span><br><span class="line">  i.docsMutex.RLock()</span><br><span class="line">  <span class="keyword">defer</span> i.docsMutex.RUnlock()</span><br><span class="line">  docs := <span class="built_in">make</span>(<span class="keyword">map</span>[core.DocumentID]core.DocumentData)</span><br><span class="line">  <span class="comment">// filter the documents using the search/document terms and a function that has a condition (AND, OR)</span></span><br><span class="line">  docIds := filterFn(terms, i.terms)</span><br><span class="line">  <span class="keyword">for</span> _, id := <span class="keyword">range</span> docIds &#123;</span><br><span class="line">    docs[id] = i.documents[id]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> docs</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Usage</span></span><br><span class="line">idx := index.New(index.Opts&#123;Analyzer: analysis.WhitespaceAnalyzer&#123;&#125;&#125;)</span><br><span class="line">idx.AddDocument(core.NewBaseDocument(<span class="string">&quot;doc1&quot;</span>, <span class="string">&quot;some text&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// there are variations to the original tf idf formula, check the code for implementation details</span></span><br><span class="line"><span class="comment">// TfWeightLog - when it is more important to find a term, than the number of times it appears on a document</span></span><br><span class="line"><span class="comment">// IdfWeightSmooth - when a word appears on all documents, idf will be 0, smoothing will cause it to be higher than zero,</span></span><br><span class="line"><span class="comment">// which can be useful when filtering documents and they all contain a term</span></span><br><span class="line">tfidfRanker := search.TfIdfRanker(search.TfWeightLog, search.IdfWeightSmooth)</span><br><span class="line">results := idx.SearchDocuments(<span class="string">&quot;sample query&quot;</span>, search.OrFilter, tfidfRanker)</span><br></pre></td></tr></table></figure>

<p>After implementing the index data structure and ranking algorithm, it was trivial to add an HTTP API on top of it. However, there are some complex topics like Unicode Text Segmentation, spelling correction (Levenshtein automaton, Norvig algorithm), autocomplete (finite state transducers, n-grams), handling multiple text fields, efficient disk persistence and of course, distributing indexes across different machines for scale (sharding). This is why using an existing solution like Elasticsearch, which is built on top of Lucene, is a good idea. Scalable technologies like Lucene, Cassandra and Kafka use log based data structures, like  LSM-Trees and SSTables, where data is written to segments and periodically merged. If you are interested in distributed systems, I recommend the Designing Data-Intensive Applications <a target="_blank" rel="noopener" href="https://www.oreilly.com/library/view/designing-data-intensive-applications/9781491903063">book</a> and Pogrebinsky’s Udemy <a target="_blank" rel="noopener" href="https://www.udemy.com/course/distributed-systems-cloud-computing-with-java">course</a>.</p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display:none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/ruial">Projects</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/atom.xml">RSS</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display:none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Indexing"><span class="toc-number">1.</span> <span class="toc-text">Indexing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Querying"><span class="toc-number">2.</span> <span class="toc-text">Querying</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#A-minimal-search-engine-in-Go"><span class="toc-number">3.</span> <span class="toc-text">A minimal search engine in Go</span></a></li></ol>
    </div>

    <div id="share-footer" style="display:none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://briefbytes.com/2021/Building-a-full-text-search-engine/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://briefbytes.com/2021/Building-a-full-text-search-engine/&text=Building a full text search engine"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://briefbytes.com/2021/Building-a-full-text-search-engine/&title=Building a full text search engine"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://briefbytes.com/2021/Building-a-full-text-search-engine/&is_video=false&description=Building a full text search engine"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Building a full text search engine&body=Check out this article: https://briefbytes.com/2021/Building-a-full-text-search-engine/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://briefbytes.com/2021/Building-a-full-text-search-engine/&title=Building a full text search engine"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://briefbytes.com/2021/Building-a-full-text-search-engine/&title=Building a full text search engine"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://briefbytes.com/2021/Building-a-full-text-search-engine/&title=Building a full text search engine"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://briefbytes.com/2021/Building-a-full-text-search-engine/&title=Building a full text search engine"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://briefbytes.com/2021/Building-a-full-text-search-engine/&name=Building a full text search engine&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://briefbytes.com/2021/Building-a-full-text-search-engine/&t=Building a full text search engine"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick='return $("#nav-footer").toggle(),!1'><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick='return $("#toc-footer").toggle(),!1'><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick='return $("#share-footer").toggle(),!1'><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2022
    Rui Almeida
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <li><a href="/">Home</a></li><li><a href="/about/">About</a></li><li><a href="/archives/">Writing</a></li><li><a target="_blank" rel="noopener" href="https://github.com/ruial">Projects</a></li><li><a href="/search/">Search</a></li><li><a href="/atom.xml">RSS</a></li>
      </ul>
    </nav>
  </div>
</footer>

    </div>
    



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload='this.onload=null,this.rel="stylesheet"'>


    
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 






  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">$(function(){$(".highlight table").before('<span class="btn-copy tooltipped tooltipped-sw" aria-label="Copy to clipboard!"><i class="far fa-clone"></i></span>'),new ClipboardJS(".btn-copy",{text:function(e){return Array.from(e.nextElementSibling.querySelectorAll(".code")).reduce((e,t)=>e+t.innerText+"\n","")}}).on("success",function(e){e.trigger.setAttribute("aria-label","Copied!"),e.clearSelection()})})</script>


<script src="/js/main.js"></script>





    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-141298250-1"></script>
    <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-141298250-1")</script>









    <script type="text/javascript">var disqus_shortname="briefbytes";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script>



</body>
</html>
