var searchFunc=function(e,t,i){$.ajax({url:e,dataType:"xml",success:function(e){var r,n=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("link",this).attr("href")}}).get(),e=document.getElementById(t);e&&(r=document.getElementById(i),e.addEventListener("input",function(){var o=[],g=(e=>{for(var t,r=[],n=0;n<e.length;n++)for(t=n+1;t<e.length+1;t++)r.push(e.slice(n,t).join(" "));return r})(this.value.trim().toLowerCase().split(" ")).sort(function(e,t){return t.split(" ").length-e.split(" ").length});if(r.innerHTML="",!(this.value.trim().length<=0)&&(n.forEach(function(e){var t,r,n=0,i=(e.title&&""!==e.title.trim()||(e.title="Untitled"),e.title.trim().toLowerCase()),l=i.toLowerCase(),s=e.content.trim().replace(/<style([\s\S]*?)<\/style>/gi,"").replace(/<script([\s\S]*?)<\/script>/gi,"").replace(/<figure([\s\S]*?)<\/figure>/gi,"").replace(/<\/div>/gi,"\n").replace(/<\/li>/gi,"\n").replace(/<li>/gi,"  *  ").replace(/<\/ul>/gi,"\n").replace(/<\/p>/gi,"\n").replace(/<br\s*[\/]?>/gi,"\n").replace(/<[^>]+>/gi,""),a=s.toLowerCase(),e=e.url,c=-1,u=-1;""!==s&&g.forEach(function(e){t=l.indexOf(e),c=a.indexOf(e),(0<=t||0<=c)&&(n+=1,c<0&&(c=0),u<0)&&(u=c)}),0<n&&((r={}).rank=n,r.str="<li><a href='"+e+"' class='search-result-title'>"+i+"</a>",0<=u&&(e=u+80,(e=0==(i=(i=u-20)<0?0:i)?100:e)>s.length&&(e=s.length),s=s.substring(i,e),i=new RegExp(g.join("|"),"gi"),s=s.replace(i,function(e){return'<em class="search-keyword">'+e+"</em>"}),r.str+='<p class="search-result">'+s+"...</p>"),r.str+="</li>",o.push(r))}),o.length)){o.sort(function(e,t){return t.rank-e.rank});for(var e='<ul class="search-result-list">',t=0;t<o.length;t++)e+=o[t].str;r.innerHTML=e+="</ul>"}}))}})};